
<!DOCTYPE html>


<html lang="en" data-content_root="./" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Usage &#8212; CloudDrift  documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
<link href="_static/styles/bootstrap.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />

  
  <link href="_static/vendor/fontawesome/6.5.1/css/all.min.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.1/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.1/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.1/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=a746c00c" />
    <link rel="stylesheet" type="text/css" href="_static/styles/sphinx-book-theme.css?v=384b581d" />
    <link rel="stylesheet" type="text/css" href="_static/graphviz.css?v=fd3f3429" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css?v=76b2166b" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=8d27b9dea8ad943066ae" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=8d27b9dea8ad943066ae" />
  <script src="_static/vendor/fontawesome/6.5.1/js/all.min.js?digest=8d27b9dea8ad943066ae"></script>

    <script src="_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="_static/doctools.js?v=9a2dae69"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="_static/copybutton.js?v=35a8b989"></script>
    <script src="_static/scripts/sphinx-book-theme.js?v=efea14e4"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'usage';</script>
    <link rel="icon" href="_static/favicon.ico"/>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Datasets" href="datasets.html" />
    <link rel="prev" title="Installation" href="install.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a id="pst-skip-link" class="skip-link" href="#main-content">Skip to main content</a>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>
    Back to top
  </button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search..."
         aria-label="Search..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <header class="bd-header navbar navbar-expand-lg bd-navbar">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  

<a class="navbar-brand logo" href="index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="_static/logo.png" class="logo__image only-light" alt="CloudDrift  documentation - Home"/>
    <script>document.write(`<img src="_static/logo.png" class="logo__image only-dark" alt="CloudDrift  documentation - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn navbar-btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Getting started</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="install.html">Installation</a></li>

<li class="toctree-l1 current active"><a class="current reference internal" href="#">Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="datasets.html">Datasets</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Reference</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference external" href="https://github.com/kevinsantana11/clouddrift/blob/dev-tools/CONTRIBUTING.md">Contributing</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="api.html">API</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-1"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="_autosummary/clouddrift.adapters.html">clouddrift.adapters</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-2"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3 has-children"><a class="reference internal" href="_autosummary/clouddrift.adapters.andro.html">clouddrift.adapters.andro</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-3"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/clouddrift.adapters.andro.to_xarray.html">clouddrift.adapters.andro.to_xarray</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="_autosummary/clouddrift.adapters.gdp.html">clouddrift.adapters.gdp</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-4"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/clouddrift.adapters.gdp.cast_float64_variables_to_float32.html">clouddrift.adapters.gdp.cast_float64_variables_to_float32</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/clouddrift.adapters.gdp.cut_str.html">clouddrift.adapters.gdp.cut_str</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/clouddrift.adapters.gdp.decode_date.html">clouddrift.adapters.gdp.decode_date</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/clouddrift.adapters.gdp.drogue_presence.html">clouddrift.adapters.gdp.drogue_presence</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/clouddrift.adapters.gdp.fetch_netcdf.html">clouddrift.adapters.gdp.fetch_netcdf</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/clouddrift.adapters.gdp.fill_values.html">clouddrift.adapters.gdp.fill_values</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/clouddrift.adapters.gdp.get_gdp_metadata.html">clouddrift.adapters.gdp.get_gdp_metadata</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/clouddrift.adapters.gdp.order_by_date.html">clouddrift.adapters.gdp.order_by_date</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/clouddrift.adapters.gdp.parse_directory_file.html">clouddrift.adapters.gdp.parse_directory_file</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/clouddrift.adapters.gdp.rowsize.html">clouddrift.adapters.gdp.rowsize</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/clouddrift.adapters.gdp.str_to_float.html">clouddrift.adapters.gdp.str_to_float</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="_autosummary/clouddrift.adapters.gdp1h.html">clouddrift.adapters.gdp1h</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-5"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/clouddrift.adapters.gdp1h.download.html">clouddrift.adapters.gdp1h.download</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/clouddrift.adapters.gdp1h.preprocess.html">clouddrift.adapters.gdp1h.preprocess</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/clouddrift.adapters.gdp1h.to_raggedarray.html">clouddrift.adapters.gdp1h.to_raggedarray</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="_autosummary/clouddrift.adapters.gdp6h.html">clouddrift.adapters.gdp6h</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-6"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/clouddrift.adapters.gdp6h.download.html">clouddrift.adapters.gdp6h.download</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/clouddrift.adapters.gdp6h.preprocess.html">clouddrift.adapters.gdp6h.preprocess</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/clouddrift.adapters.gdp6h.to_raggedarray.html">clouddrift.adapters.gdp6h.to_raggedarray</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="_autosummary/clouddrift.adapters.glad.html">clouddrift.adapters.glad</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-7"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/clouddrift.adapters.glad.get_dataframe.html">clouddrift.adapters.glad.get_dataframe</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/clouddrift.adapters.glad.to_xarray.html">clouddrift.adapters.glad.to_xarray</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="_autosummary/clouddrift.adapters.hurdat2.html">clouddrift.adapters.hurdat2</a><input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-8"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/clouddrift.adapters.hurdat2.to_raggedarray.html">clouddrift.adapters.hurdat2.to_raggedarray</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/clouddrift.adapters.hurdat2.DataLine.html">clouddrift.adapters.hurdat2.DataLine</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/clouddrift.adapters.hurdat2.HeaderLine.html">clouddrift.adapters.hurdat2.HeaderLine</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/clouddrift.adapters.hurdat2.RecordIdentifier.html">clouddrift.adapters.hurdat2.RecordIdentifier</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/clouddrift.adapters.hurdat2.SystemStatus.html">clouddrift.adapters.hurdat2.SystemStatus</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/clouddrift.adapters.hurdat2.TrackData.html">clouddrift.adapters.hurdat2.TrackData</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="_autosummary/clouddrift.adapters.mosaic.html">clouddrift.adapters.mosaic</a><input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-9"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/clouddrift.adapters.mosaic.get_dataframes.html">clouddrift.adapters.mosaic.get_dataframes</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/clouddrift.adapters.mosaic.get_file_urls.html">clouddrift.adapters.mosaic.get_file_urls</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/clouddrift.adapters.mosaic.get_repository_metadata.html">clouddrift.adapters.mosaic.get_repository_metadata</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/clouddrift.adapters.mosaic.to_xarray.html">clouddrift.adapters.mosaic.to_xarray</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="_autosummary/clouddrift.adapters.subsurface_floats.html">clouddrift.adapters.subsurface_floats</a><input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-10"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/clouddrift.adapters.subsurface_floats.download.html">clouddrift.adapters.subsurface_floats.download</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/clouddrift.adapters.subsurface_floats.to_xarray.html">clouddrift.adapters.subsurface_floats.to_xarray</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="_autosummary/clouddrift.adapters.utils.html">clouddrift.adapters.utils</a><input class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-11"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/clouddrift.adapters.utils.download_with_progress.html">clouddrift.adapters.utils.download_with_progress</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="_autosummary/clouddrift.adapters.yomaha.html">clouddrift.adapters.yomaha</a><input class="toctree-checkbox" id="toctree-checkbox-12" name="toctree-checkbox-12" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-12"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/clouddrift.adapters.yomaha.download.html">clouddrift.adapters.yomaha.download</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/clouddrift.adapters.yomaha.to_xarray.html">clouddrift.adapters.yomaha.to_xarray</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="_autosummary/clouddrift.datasets.html">clouddrift.datasets</a><input class="toctree-checkbox" id="toctree-checkbox-13" name="toctree-checkbox-13" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-13"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="_autosummary/clouddrift.datasets.andro.html">clouddrift.datasets.andro</a></li>
<li class="toctree-l3"><a class="reference internal" href="_autosummary/clouddrift.datasets.gdp1h.html">clouddrift.datasets.gdp1h</a></li>
<li class="toctree-l3"><a class="reference internal" href="_autosummary/clouddrift.datasets.gdp6h.html">clouddrift.datasets.gdp6h</a></li>
<li class="toctree-l3"><a class="reference internal" href="_autosummary/clouddrift.datasets.glad.html">clouddrift.datasets.glad</a></li>
<li class="toctree-l3"><a class="reference internal" href="_autosummary/clouddrift.datasets.hurdat2.html">clouddrift.datasets.hurdat2</a></li>
<li class="toctree-l3"><a class="reference internal" href="_autosummary/clouddrift.datasets.mosaic.html">clouddrift.datasets.mosaic</a></li>
<li class="toctree-l3"><a class="reference internal" href="_autosummary/clouddrift.datasets.spotters.html">clouddrift.datasets.spotters</a></li>
<li class="toctree-l3"><a class="reference internal" href="_autosummary/clouddrift.datasets.subsurface_floats.html">clouddrift.datasets.subsurface_floats</a></li>
<li class="toctree-l3"><a class="reference internal" href="_autosummary/clouddrift.datasets.yomaha.html">clouddrift.datasets.yomaha</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="_autosummary/clouddrift.kinematics.html">clouddrift.kinematics</a><input class="toctree-checkbox" id="toctree-checkbox-14" name="toctree-checkbox-14" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-14"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="_autosummary/clouddrift.kinematics.inertial_oscillation_from_position.html">clouddrift.kinematics.inertial_oscillation_from_position</a></li>
<li class="toctree-l3"><a class="reference internal" href="_autosummary/clouddrift.kinematics.kinetic_energy.html">clouddrift.kinematics.kinetic_energy</a></li>
<li class="toctree-l3"><a class="reference internal" href="_autosummary/clouddrift.kinematics.position_from_velocity.html">clouddrift.kinematics.position_from_velocity</a></li>
<li class="toctree-l3"><a class="reference internal" href="_autosummary/clouddrift.kinematics.residual_position_from_displacement.html">clouddrift.kinematics.residual_position_from_displacement</a></li>
<li class="toctree-l3"><a class="reference internal" href="_autosummary/clouddrift.kinematics.spin.html">clouddrift.kinematics.spin</a></li>
<li class="toctree-l3"><a class="reference internal" href="_autosummary/clouddrift.kinematics.velocity_from_position.html">clouddrift.kinematics.velocity_from_position</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="_autosummary/clouddrift.pairs.html">clouddrift.pairs</a><input class="toctree-checkbox" id="toctree-checkbox-15" name="toctree-checkbox-15" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-15"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="_autosummary/clouddrift.pairs.chance_pair.html">clouddrift.pairs.chance_pair</a></li>
<li class="toctree-l3"><a class="reference internal" href="_autosummary/clouddrift.pairs.chance_pairs_from_ragged.html">clouddrift.pairs.chance_pairs_from_ragged</a></li>
<li class="toctree-l3"><a class="reference internal" href="_autosummary/clouddrift.pairs.pair_bounding_box_overlap.html">clouddrift.pairs.pair_bounding_box_overlap</a></li>
<li class="toctree-l3"><a class="reference internal" href="_autosummary/clouddrift.pairs.pair_space_distance.html">clouddrift.pairs.pair_space_distance</a></li>
<li class="toctree-l3"><a class="reference internal" href="_autosummary/clouddrift.pairs.pair_time_distance.html">clouddrift.pairs.pair_time_distance</a></li>
<li class="toctree-l3"><a class="reference internal" href="_autosummary/clouddrift.pairs.pair_time_overlap.html">clouddrift.pairs.pair_time_overlap</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="_autosummary/clouddrift.plotting.html">clouddrift.plotting</a><input class="toctree-checkbox" id="toctree-checkbox-16" name="toctree-checkbox-16" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-16"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="_autosummary/clouddrift.plotting.plot_ragged.html">clouddrift.plotting.plot_ragged</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="_autosummary/clouddrift.ragged.html">clouddrift.ragged</a><input class="toctree-checkbox" id="toctree-checkbox-17" name="toctree-checkbox-17" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-17"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="_autosummary/clouddrift.ragged.apply_ragged.html">clouddrift.ragged.apply_ragged</a></li>
<li class="toctree-l3"><a class="reference internal" href="_autosummary/clouddrift.ragged.chunk.html">clouddrift.ragged.chunk</a></li>
<li class="toctree-l3"><a class="reference internal" href="_autosummary/clouddrift.ragged.prune.html">clouddrift.ragged.prune</a></li>
<li class="toctree-l3"><a class="reference internal" href="_autosummary/clouddrift.ragged.ragged_to_regular.html">clouddrift.ragged.ragged_to_regular</a></li>
<li class="toctree-l3"><a class="reference internal" href="_autosummary/clouddrift.ragged.regular_to_ragged.html">clouddrift.ragged.regular_to_ragged</a></li>
<li class="toctree-l3"><a class="reference internal" href="_autosummary/clouddrift.ragged.rowsize_to_index.html">clouddrift.ragged.rowsize_to_index</a></li>
<li class="toctree-l3"><a class="reference internal" href="_autosummary/clouddrift.ragged.segment.html">clouddrift.ragged.segment</a></li>
<li class="toctree-l3"><a class="reference internal" href="_autosummary/clouddrift.ragged.subset.html">clouddrift.ragged.subset</a></li>
<li class="toctree-l3"><a class="reference internal" href="_autosummary/clouddrift.ragged.unpack.html">clouddrift.ragged.unpack</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="_autosummary/clouddrift.raggedarray.html">clouddrift.raggedarray</a><input class="toctree-checkbox" id="toctree-checkbox-18" name="toctree-checkbox-18" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-18"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="_autosummary/clouddrift.raggedarray.RaggedArray.html">clouddrift.raggedarray.RaggedArray</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="_autosummary/clouddrift.signal.html">clouddrift.signal</a><input class="toctree-checkbox" id="toctree-checkbox-19" name="toctree-checkbox-19" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-19"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="_autosummary/clouddrift.signal.analytic_signal.html">clouddrift.signal.analytic_signal</a></li>
<li class="toctree-l3"><a class="reference internal" href="_autosummary/clouddrift.signal.cartesian_to_rotary.html">clouddrift.signal.cartesian_to_rotary</a></li>
<li class="toctree-l3"><a class="reference internal" href="_autosummary/clouddrift.signal.ellipse_parameters.html">clouddrift.signal.ellipse_parameters</a></li>
<li class="toctree-l3"><a class="reference internal" href="_autosummary/clouddrift.signal.modulated_ellipse_signal.html">clouddrift.signal.modulated_ellipse_signal</a></li>
<li class="toctree-l3"><a class="reference internal" href="_autosummary/clouddrift.signal.rotary_to_cartesian.html">clouddrift.signal.rotary_to_cartesian</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="_autosummary/clouddrift.sphere.html">clouddrift.sphere</a><input class="toctree-checkbox" id="toctree-checkbox-20" name="toctree-checkbox-20" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-20"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="_autosummary/clouddrift.sphere.bearing.html">clouddrift.sphere.bearing</a></li>
<li class="toctree-l3"><a class="reference internal" href="_autosummary/clouddrift.sphere.cartesian_to_spherical.html">clouddrift.sphere.cartesian_to_spherical</a></li>
<li class="toctree-l3"><a class="reference internal" href="_autosummary/clouddrift.sphere.cartesian_to_tangentplane.html">clouddrift.sphere.cartesian_to_tangentplane</a></li>
<li class="toctree-l3"><a class="reference internal" href="_autosummary/clouddrift.sphere.coriolis_frequency.html">clouddrift.sphere.coriolis_frequency</a></li>
<li class="toctree-l3"><a class="reference internal" href="_autosummary/clouddrift.sphere.cumulative_distance.html">clouddrift.sphere.cumulative_distance</a></li>
<li class="toctree-l3"><a class="reference internal" href="_autosummary/clouddrift.sphere.distance.html">clouddrift.sphere.distance</a></li>
<li class="toctree-l3"><a class="reference internal" href="_autosummary/clouddrift.sphere.plane_to_sphere.html">clouddrift.sphere.plane_to_sphere</a></li>
<li class="toctree-l3"><a class="reference internal" href="_autosummary/clouddrift.sphere.position_from_distance_and_bearing.html">clouddrift.sphere.position_from_distance_and_bearing</a></li>
<li class="toctree-l3"><a class="reference internal" href="_autosummary/clouddrift.sphere.recast_lon.html">clouddrift.sphere.recast_lon</a></li>
<li class="toctree-l3"><a class="reference internal" href="_autosummary/clouddrift.sphere.recast_lon180.html">clouddrift.sphere.recast_lon180</a></li>
<li class="toctree-l3"><a class="reference internal" href="_autosummary/clouddrift.sphere.recast_lon360.html">clouddrift.sphere.recast_lon360</a></li>
<li class="toctree-l3"><a class="reference internal" href="_autosummary/clouddrift.sphere.sphere_to_plane.html">clouddrift.sphere.sphere_to_plane</a></li>
<li class="toctree-l3"><a class="reference internal" href="_autosummary/clouddrift.sphere.spherical_to_cartesian.html">clouddrift.sphere.spherical_to_cartesian</a></li>
<li class="toctree-l3"><a class="reference internal" href="_autosummary/clouddrift.sphere.tangentplane_to_cartesian.html">clouddrift.sphere.tangentplane_to_cartesian</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="_autosummary/clouddrift.wavelet.html">clouddrift.wavelet</a><input class="toctree-checkbox" id="toctree-checkbox-21" name="toctree-checkbox-21" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-21"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="_autosummary/clouddrift.wavelet.morse_amplitude.html">clouddrift.wavelet.morse_amplitude</a></li>
<li class="toctree-l3"><a class="reference internal" href="_autosummary/clouddrift.wavelet.morse_freq.html">clouddrift.wavelet.morse_freq</a></li>
<li class="toctree-l3"><a class="reference internal" href="_autosummary/clouddrift.wavelet.morse_logspace_freq.html">clouddrift.wavelet.morse_logspace_freq</a></li>
<li class="toctree-l3"><a class="reference internal" href="_autosummary/clouddrift.wavelet.morse_properties.html">clouddrift.wavelet.morse_properties</a></li>
<li class="toctree-l3"><a class="reference internal" href="_autosummary/clouddrift.wavelet.morse_wavelet.html">clouddrift.wavelet.morse_wavelet</a></li>
<li class="toctree-l3"><a class="reference internal" href="_autosummary/clouddrift.wavelet.morse_wavelet_transform.html">clouddrift.wavelet.morse_wavelet_transform</a></li>
<li class="toctree-l3"><a class="reference internal" href="_autosummary/clouddrift.wavelet.wavelet_transform.html">clouddrift.wavelet.wavelet_transform</a></li>
</ul>
</li>
</ul>
</li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="_sources/usage.rst" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.rst</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Usage</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#accessing-ragged-array-lagrangian-datasets">Accessing ragged-array Lagrangian datasets</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#doing-common-analysis-tasks-on-ragged-arrays">Doing common analysis tasks on ragged arrays</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#adapting-custom-lagrangian-datasets-into-ragged-arrays">Adapting custom Lagrangian datasets into ragged arrays</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="usage">
<span id="id1"></span><h1>Usage<a class="headerlink" href="#usage" title="Link to this heading">#</a></h1>
<p>The CloudDrift library provides functions for:</p>
<ul class="simple">
<li><p>Easy access to cloud-ready Lagrangian ragged-array datasets;</p></li>
<li><p>Common Lagrangian analysis tasks on ragged arrays;</p></li>
<li><p>Adapting custom Lagrangian datasets into ragged arrays.</p></li>
</ul>
<p>Let’s start by importing the library and accessing a ready-to-use ragged-array
dataset.</p>
<section id="accessing-ragged-array-lagrangian-datasets">
<h2>Accessing ragged-array Lagrangian datasets<a class="headerlink" href="#accessing-ragged-array-lagrangian-datasets" title="Link to this heading">#</a></h2>
<p>We recommend to import the <code class="docutils literal notranslate"><span class="pre">clouddrift</span></code> using the <code class="docutils literal notranslate"><span class="pre">cd</span></code> shorthand, for convenience:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">clouddrift</span> <span class="k">as</span> <span class="nn">cd</span>
</pre></div>
</div>
<p>CloudDrift provides a set of Lagrangian datasets that are ready to use.
They can be accessed via the <code class="docutils literal notranslate"><span class="pre">datasets</span></code> submodule.
In this example, we will load the NOAA’s Global Drifter Program (GDP) hourly
dataset, which is hosted in a public AWS bucket as a cloud-optimized Zarr
dataset:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ds</span> <span class="o">=</span> <span class="n">cd</span><span class="o">.</span><span class="n">datasets</span><span class="o">.</span><span class="n">gdp1h</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ds</span>
<span class="go">&lt;xarray.Dataset&gt;</span>
<span class="go">Dimensions:                (traj: 17324, obs: 165754333)</span>
<span class="go">Coordinates:</span>
<span class="go">    ids                    (obs) int64 ...</span>
<span class="go">    lat                    (obs) float32 ...</span>
<span class="go">    lon                    (obs) float32 ...</span>
<span class="go">    time                   (obs) datetime64[ns] ...</span>
<span class="go">Dimensions without coordinates: traj, obs</span>
<span class="go">Data variables: (12/55)</span>
<span class="go">    BuoyTypeManufacturer   (traj) |S20 ...</span>
<span class="go">    BuoyTypeSensorArray    (traj) |S20 ...</span>
<span class="go">    CurrentProgram         (traj) float64 ...</span>
<span class="go">    DeployingCountry       (traj) |S20 ...</span>
<span class="go">    DeployingShip          (traj) |S20 ...</span>
<span class="go">    DeploymentComments     (traj) |S20 ...</span>
<span class="go">    ...                     ...</span>
<span class="go">    sst1                   (obs) float64 ...</span>
<span class="go">    sst2                   (obs) float64 ...</span>
<span class="go">    typebuoy               (traj) |S10 ...</span>
<span class="go">    typedeath              (traj) int8 ...</span>
<span class="go">    ve                     (obs) float32 ...</span>
<span class="go">    vn                     (obs) float32 ...</span>
<span class="go">Attributes: (12/16)</span>
<span class="go">    Conventions:       CF-1.6</span>
<span class="go">    acknowledgement:   Elipot, Shane; Sykulski, Adam; Lumpkin, Rick; Centurio...</span>
<span class="go">    contributor_name:  NOAA Global Drifter Program</span>
<span class="go">    contributor_role:  Data Acquisition Center</span>
<span class="go">    date_created:      2022-12-09T06:02:29.684949</span>
<span class="go">    doi:               10.25921/x46c-3620</span>
<span class="go">    ...                ...</span>
<span class="go">    processing_level:  Level 2 QC by GDP drifter DAC</span>
<span class="go">    publisher_email:   aoml.dftr@noaa.gov</span>
<span class="go">    publisher_name:    GDP Drifter DAC</span>
<span class="go">    publisher_url:     https://www.aoml.noaa.gov/phod/gdp</span>
<span class="go">    summary:           Global Drifter Program hourly data</span>
<span class="go">    title:             Global Drifter Program hourly drifting buoy collection</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">gdp1h</span></code> function returns an Xarray <code class="docutils literal notranslate"><span class="pre">Dataset</span></code> instance of the ragged-array dataset.
While the dataset is quite large, around a dozen GB, it is not downloaded to your
local machine. Instead, the dataset is accessed directly from the cloud, and only
the data that is needed for the analysis is downloaded. This is possible thanks to
the cloud-optimized Zarr format, which allows for efficient access to the data
stored in the cloud.</p>
<p>Let’s look at some variables in this dataset:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ds</span><span class="o">.</span><span class="n">lon</span>
<span class="go">&lt;xarray.DataArray &#39;lon&#39; (obs: 165754333)&gt;</span>
<span class="go">[165754333 values with dtype=float32]</span>
<span class="go">Coordinates:</span>
<span class="go">    ids      (obs) int64 ...</span>
<span class="go">    lat      (obs) float32 ...</span>
<span class="go">    lon      (obs) float32 ...</span>
<span class="go">    time     (obs) datetime64[ns] ...</span>
<span class="go">Dimensions without coordinates: obs</span>
<span class="go">Attributes:</span>
<span class="go">    long_name:  Longitude</span>
<span class="go">    units:      degrees_east</span>
</pre></div>
</div>
<p>You see that this array is very long–it has 165754333 elements.
This is because in a ragged array, many varying-length arrays are laid out as a
contiguous 1-dimensional array in memory.</p>
<p>Let’s look at the dataset dimensions:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ds</span><span class="o">.</span><span class="n">sizes</span>
<span class="go">Frozen({&#39;traj&#39;: 17324, &#39;obs&#39;: 165754333})</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">traj</span></code> dimension has 17324 elements, which is the number of individual
trajectories in the dataset.
The sum of their lengths equals the length of the <code class="docutils literal notranslate"><span class="pre">obs</span></code> dimension.
Internally, these dimensions, their lengths, and the <code class="docutils literal notranslate"><span class="pre">rowsize</span></code>
variable are used internally to make CloudDrift’s analysis functions aware of
the bounds of each contiguous array within the ragged-array data structure.</p>
</section>
<section id="doing-common-analysis-tasks-on-ragged-arrays">
<h2>Doing common analysis tasks on ragged arrays<a class="headerlink" href="#doing-common-analysis-tasks-on-ragged-arrays" title="Link to this heading">#</a></h2>
<p>Now that we have a ragged-array dataset loaded as an Xarray <code class="docutils literal notranslate"><span class="pre">Dataset</span></code> instance,
let’s do some common analysis tasks on it.
Our dataset is on a remote server and fairly large (a dozen GB or so), so let’s
first subset it to several trajectories so that we can more easily work with it.
The variable <code class="docutils literal notranslate"><span class="pre">ID</span></code> is the unique identifier for each trajectory:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ds</span><span class="o">.</span><span class="n">ID</span><span class="p">[:</span><span class="mi">10</span><span class="p">]</span><span class="o">.</span><span class="n">values</span>
<span class="go">array([2578, 2582, 2583, 2592, 2612, 2613, 2622, 2623, 2931, 2932])</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">clouddrift.ragged</span> <span class="kn">import</span> <span class="n">subset</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">subset</span></code> allows you to subset a ragged array by some criterion.
In this case, we will subset it by the <code class="docutils literal notranslate"><span class="pre">ID</span></code> variable:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ds_sub</span> <span class="o">=</span> <span class="n">subset</span><span class="p">(</span><span class="n">ds</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;ID&quot;</span><span class="p">:</span> <span class="nb">list</span><span class="p">(</span><span class="n">ds</span><span class="o">.</span><span class="n">ID</span><span class="p">[:</span><span class="mi">5</span><span class="p">])})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ds_sub</span>
<span class="go">&lt;xarray.Dataset&gt;</span>
<span class="go">Dimensions:                (traj: 5, obs: 13612)</span>
<span class="go">Coordinates:</span>
<span class="go">    ids                    (obs) int64 2578 2578 2578 2578 ... 2612 2612 2612</span>
<span class="go">    lat                    (obs) float32 ...</span>
<span class="go">    lon                    (obs) float32 ...</span>
<span class="go">    time                   (obs) datetime64[ns] ...</span>
<span class="go">Dimensions without coordinates: traj, obs</span>
<span class="go">Data variables: (12/55)</span>
<span class="go">    BuoyTypeManufacturer   (traj) |S20 ...</span>
<span class="go">    BuoyTypeSensorArray    (traj) |S20 ...</span>
<span class="go">    CurrentProgram         (traj) float64 ...</span>
<span class="go">    DeployingCountry       (traj) |S20 ...</span>
<span class="go">    DeployingShip          (traj) |S20 ...</span>
<span class="go">    DeploymentComments     (traj) |S20 ...</span>
<span class="go">    ...                     ...</span>
<span class="go">    sst1                   (obs) float64 ...</span>
<span class="go">    sst2                   (obs) float64 ...</span>
<span class="go">    typebuoy               (traj) |S10 ...</span>
<span class="go">    typedeath              (traj) int8 ...</span>
<span class="go">    ve                     (obs) float32 ...</span>
<span class="go">    vn                     (obs) float32 ...</span>
<span class="go">Attributes: (12/16)</span>
<span class="go">    Conventions:       CF-1.6</span>
<span class="go">    acknowledgement:   Elipot, Shane; Sykulski, Adam; Lumpkin, Rick; Centurio...</span>
<span class="go">    contributor_name:  NOAA Global Drifter Program</span>
<span class="go">    contributor_role:  Data Acquisition Center</span>
<span class="go">    date_created:      2022-12-09T06:02:29.684949</span>
<span class="go">    doi:               10.25921/x46c-3620</span>
<span class="go">    ...                ...</span>
<span class="go">    processing_level:  Level 2 QC by GDP drifter DAC</span>
<span class="go">    publisher_email:   aoml.dftr@noaa.gov</span>
<span class="go">    publisher_name:    GDP Drifter DAC</span>
<span class="go">    publisher_url:     https://www.aoml.noaa.gov/phod/gdp</span>
<span class="go">    summary:           Global Drifter Program hourly data</span>
<span class="go">    title:             Global Drifter Program hourly drifting buoy collection</span>
</pre></div>
</div>
<p>You see that we now have a subset of the original dataset, with 5 trajectories
and a total of 13612 observations.
This subset is small enough to quickly and easily work with for demonstration
purposes.
Let’s see how we can compute the mean and maximum velocities of each trajectory.
To start, we’ll need to obtain the velocities over all trajectory times.
Although the GDP dataset already comes with velocity variables, we won’t use
them here so that we can learn how to compute them ourselves from positions.
<code class="docutils literal notranslate"><span class="pre">clouddrift</span></code>’s <code class="docutils literal notranslate"><span class="pre">kinematics</span></code> module provides the <code class="docutils literal notranslate"><span class="pre">velocity_from_position</span></code>
function that allows you to do just that.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">clouddrift.kinematics</span> <span class="kn">import</span> <span class="n">velocity_from_position</span>
</pre></div>
</div>
<p>At a minimum <code class="docutils literal notranslate"><span class="pre">velocity_from_position</span></code> requires three input parameters:
consecutive x- and y-coordinates and time, so we could do:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">u</span><span class="p">,</span> <span class="n">v</span> <span class="o">=</span> <span class="n">velocity_from_position</span><span class="p">(</span><span class="n">ds_sub</span><span class="o">.</span><span class="n">lon</span><span class="p">,</span> <span class="n">ds_sub</span><span class="o">.</span><span class="n">lat</span><span class="p">,</span> <span class="n">ds_sub</span><span class="o">.</span><span class="n">time</span><span class="p">)</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">velocity_from_position</span></code> returns two arrays, <code class="docutils literal notranslate"><span class="pre">u</span></code> and <code class="docutils literal notranslate"><span class="pre">v</span></code>, which are the
zonal and meridional velocities, respectively.
By default, it assumes that the coordinates are in degrees, and it handles the
great circle path calculation and longitude wraparound under the hood.
However, recall that <code class="docutils literal notranslate"><span class="pre">ds_sub.lon</span></code>, <code class="docutils literal notranslate"><span class="pre">ds_sub.lat</span></code>, and <code class="docutils literal notranslate"><span class="pre">ds_sub.time</span></code> are
ragged arrays, so we need a different approach to calculate velocities while
respecting the trajectory boundaries.
For this, we can use the <code class="docutils literal notranslate"><span class="pre">ragged_apply</span></code> function, which applies a function
to each trajectory in a ragged array, and returns the concatenated result.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">clouddrift.ragged</span> <span class="kn">import</span> <span class="n">apply_ragged</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">u</span><span class="p">,</span> <span class="n">v</span> <span class="o">=</span> <span class="n">apply_ragged</span><span class="p">(</span><span class="n">velocity_from_position</span><span class="p">,</span> <span class="p">[</span><span class="n">ds_sub</span><span class="o">.</span><span class="n">lon</span><span class="p">,</span> <span class="n">ds_sub</span><span class="o">.</span><span class="n">lat</span><span class="p">,</span> <span class="n">ds_sub</span><span class="o">.</span><span class="n">time</span><span class="p">],</span> <span class="n">ds_sub</span><span class="o">.</span><span class="n">rowsize</span><span class="p">)</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">u</span></code> and <code class="docutils literal notranslate"><span class="pre">v</span></code> here are still ragged arrays, which means that the five
contiguous trajectories are concatenated into 1-dimensional arrays.</p>
<p>Now, let’s compute the velocity magnitude in meters per second.
The time in this dataset is loaded in nanoseconds by default:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ds_sub</span><span class="o">.</span><span class="n">time</span><span class="o">.</span><span class="n">values</span>
<span class="go">array([&#39;2005-04-15T20:00:00.000000000&#39;, &#39;2005-04-15T21:00:00.000000000&#39;,</span>
<span class="go">       &#39;2005-04-15T22:00:00.000000000&#39;, ...,</span>
<span class="go">       &#39;2005-10-02T03:00:00.000000000&#39;, &#39;2005-10-02T04:00:00.000000000&#39;,</span>
<span class="go">       &#39;2005-10-02T05:00:00.000000000&#39;], dtype=&#39;datetime64[ns]&#39;)</span>
</pre></div>
</div>
<p>So, to obtain the velocity magnitude in meters per second, we’ll need to
multiply our velocities by <code class="docutils literal notranslate"><span class="pre">1e9</span></code>.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">velocity_magnitude</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">u</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span> <span class="n">v</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="mf">1e9</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">velocity_magnitude</span>
<span class="go">array([0.28053388, 0.6164632 , 0.89032112, ..., 0.2790803 , 0.20095603,</span>
<span class="go">       0.20095603])</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">velocity_magnitude</span><span class="o">.</span><span class="n">mean</span><span class="p">(),</span> <span class="n">velocity_magnitude</span><span class="o">.</span><span class="n">max</span><span class="p">()</span>
<span class="go">(0.22115242718877506, 1.6958275672626286)</span>
</pre></div>
</div>
<p>However, these aren’t the results we are looking for! Recall that we have the
velocity magnitude of five different trajectories concatenated into one array.
This means that we need to use <code class="docutils literal notranslate"><span class="pre">apply_ragged</span></code> again to compute the mean and
maximum values:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">apply_ragged</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">,</span> <span class="p">[</span><span class="n">velocity_magnitude</span><span class="p">],</span> <span class="n">ds_sub</span><span class="o">.</span><span class="n">rowsize</span><span class="p">)</span>
<span class="go">array([0.32865148, 0.17752435, 0.1220523 , 0.13281067, 0.14041268])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">apply_ragged</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">max</span><span class="p">,</span> <span class="p">[</span><span class="n">velocity_magnitude</span><span class="p">],</span> <span class="n">ds_sub</span><span class="o">.</span><span class="n">rowsize</span><span class="p">)</span>
<span class="go">array([1.69582757, 1.36804354, 0.97343434, 0.60353528, 1.05044213])</span>
</pre></div>
</div>
<p>And there you go! We used <code class="docutils literal notranslate"><span class="pre">clouddrift</span></code> to:</p>
<ol class="arabic simple">
<li><p>Load a real-world Lagrangian dataset from the cloud;</p></li>
<li><p>Subset the dataset by trajectory IDs;</p></li>
<li><p>Compute the velocity vectors and their magnitudes for each trajectory;</p></li>
<li><p>Compute the mean and maximum velocity magnitudes for each trajectory.</p></li>
</ol>
<p><code class="docutils literal notranslate"><span class="pre">clouddrift</span></code> offers many more functions for common Lagrangian analysis tasks.
Please explore the <a class="reference external" href="https://cloud-drift.github.io/clouddrift/api.html">API</a>
to learn about other functions and how to use them.</p>
</section>
<section id="adapting-custom-lagrangian-datasets-into-ragged-arrays">
<h2>Adapting custom Lagrangian datasets into ragged arrays<a class="headerlink" href="#adapting-custom-lagrangian-datasets-into-ragged-arrays" title="Link to this heading">#</a></h2>
<p>CloudDrift provides an easy way to convert custom Lagrangian datasets into
<a class="reference external" href="https://cfconventions.org/cf-conventions/cf-conventions.html#_contiguous_ragged_array_representation">contiguous ragged arrays</a>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Import a GDP-hourly adapter function</span>
<span class="kn">from</span> <span class="nn">clouddrift.adapters.gdp</span> <span class="kn">import</span> <span class="n">to_raggedarray</span>

<span class="c1"># Download 100 random GDP-hourly trajectories as a ragged array</span>
<span class="n">ra</span> <span class="o">=</span> <span class="n">to_raggedarray</span><span class="p">(</span><span class="n">n_random_id</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>

<span class="c1"># Store to NetCDF and Parquet files</span>
<span class="n">ra</span><span class="o">.</span><span class="n">to_netcdf</span><span class="p">(</span><span class="s2">&quot;gdp.nc&quot;</span><span class="p">)</span>
<span class="n">ra</span><span class="o">.</span><span class="n">to_parquet</span><span class="p">(</span><span class="s2">&quot;gdp.parquet&quot;</span><span class="p">)</span>

<span class="c1"># Convert to Xarray Dataset for analysis</span>
<span class="n">ds</span> <span class="o">=</span> <span class="n">ra</span><span class="o">.</span><span class="n">to_xarray</span><span class="p">()</span>

<span class="c1"># Alternatively, convert to Awkward Array for analysis</span>
<span class="n">ds</span> <span class="o">=</span> <span class="n">ra</span><span class="o">.</span><span class="n">to_awkward</span><span class="p">()</span>
</pre></div>
</div>
<p>This snippet is specific to the hourly GDP dataset, however, you can use the
<code class="docutils literal notranslate"><span class="pre">RaggedArray</span></code> class directly to convert other custom datasets into a ragged
array structure that is analysis ready via Xarray or Awkward Array packages.
The functions to do that are defined in the <code class="docutils literal notranslate"><span class="pre">clouddrift.adapters</span></code> submodule.
You can use these examples as a reference to ingest your own or other custom
Lagrangian datasets into <code class="docutils literal notranslate"><span class="pre">RaggedArray</span></code>.</p>
</section>
</section>


                </article>
              

              
              
              
              
                <footer class="prev-next-footer">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="install.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Installation</p>
      </div>
    </a>
    <a class="right-next"
       href="datasets.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Datasets</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#accessing-ragged-array-lagrangian-datasets">Accessing ragged-array Lagrangian datasets</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#doing-common-analysis-tasks-on-ragged-arrays">Doing common analysis tasks on ragged arrays</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#adapting-custom-lagrangian-datasets-into-ragged-arrays">Adapting custom Lagrangian datasets into ragged arrays</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Philippe Miron
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2022-2023, CloudDrift.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/bootstrap.js?digest=8d27b9dea8ad943066ae"></script>
<script src="_static/scripts/pydata-sphinx-theme.js?digest=8d27b9dea8ad943066ae"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>